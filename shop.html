<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="css/null.css">
	<link rel="stylesheet" href="css/style.css">
	<link href="https://fonts.googleapis.com/css?family=Roboto:100,300,regular,500,700" rel="stylesheet"/>
	<title>tea-store</title>
</head>
<body>
	<div class="wrapper">
		<header class="header">
			<div class="header__container _container">
				<div class="header__body">
					<a class="header__logo" href="shop.html">tea-store</a>
					<div class="header__actions actions-header">
						<a class="actions-header__cart" href="cart.html">
							<div class="actions-header__cart-item">
								<svg class="cart-svg">
									<use xlink:href="img/icons/icons.svg#cart-svg"></use>
								</svg>
							</div>
							<span class="actions-header__cart-numb"></span>
						</a>
						<div class="actions-header__account">
							<div class="actions-header__account-item">
								<svg class="account-svg">
									<use xlink:href="img/icons/icons.svg#account-svg"></use>
								</svg>
							</div>
						</div>
					</div>
				</div>
			</div>
		</header>
		<main class="page">
			<section class="page__intro intro">
				<div class="intro__container _container">
					<div class="intro__body">
						<div class="intro__content">
							<div class="intro__text">
								<h1 class="intro__title">Taste the Difference:<br>Buy Tea Online with Confidence</h1>
								<div class="intro__paragraph"><p>Tea is a journey of discovery, and at Our Teas, we want to help you find your new favorite tea. Our online store is designed to make it easy and convenient for you to browse and explore our wide selection of teas from around the world. You can learn about the different teas and find the perfect one to suit your taste and mood. So why not start your tea journey today and discover your new favorite tea?</p></div>
							</div>
							<a class="intro__button btn" href=""><span>buy now!</span><svg class="arrow-right-svg">
								<use xlink:href="img/icons/icons.svg#arrow-right-svg"></use>
							</svg></a>
						</div>
						<div class="intro__image"><img src="img/intro-img.jpg" alt="intro-img"></div>
					</div>
				</div>
			</section>
			<section class="page__assortment assortment">
				<div class="assortment__container _container">
					<div class="assortment__body">
						<h2 class="assortment__title">assortment</h2>
						<ul class="assortment__cards">
							<li class="assortment__card card-assortment">
								<div class="card-assortment__overlay overlay-assortment">
									<div class="overlay-assortment__top">
										<div class="overlay-assortment__descrip"><p>Delicate and fragrant green tea scented with fresh jasmine flowers, offering a soothing and aromatic cup of tea.</p></div>
										<div class="overlay-assortment__price">21$</div>
									</div>
									<button class="overlay-assortment__button" type="button">add to cart</button>
								</div>
								<div class="card-assortment__image">
									<img class="wb-img" src="img/wb/item1.png" alt="item1-wb">
									<img src="img/item1.png" alt="item1">
								</div>
								<div class="card-assortment__text"><span>Jasmine Dragon Pearis</span></div>
							</li>
							<li class="assortment__card card-assortment">
								<div class="card-assortment__overlay overlay-assortment">
									<div class="overlay-assortment__top">
										<div class="overlay-assortment__descrip"><p>A blend of Emperor's Yellow Tea, chrysanthemum, and goji berry, creating a harmonious infusion with floral and fruity notes.</p></div>
										<div class="overlay-assortment__price">28$</div>
									</div>
									<button class="overlay-assortment__button" type="button">add to cart</button>
								</div>
								<div class="card-assortment__image">
									<img class="wb-img" src="img/wb/item2.png" alt="item2-wb">
									<img src="img/item2.png" alt="item2">
								</div>
								<div class="card-assortment__text"><span>Emperor's Yellow Tea with Chrysanthemum and Goji Berry</span></div>
							</li>
							<li class="assortment__card card-assortment">
								<div class="card-assortment__overlay overlay-assortment">
									<div class="overlay-assortment__top">
										<div class="overlay-assortment__descrip"><p>Finely ground, vibrant green tea powder known for its rich umami flavor and numerous health benefits.</p></div>
										<div class="overlay-assortment__price">20$</div>
									</div>
									<button class="overlay-assortment__button" type="button">add to cart</button>
								</div>
								<div class="card-assortment__image">
									<img class="wb-img" src="img/wb/item3.png" alt="item3-wb">
									<img src="img/item3.png" alt="item3">
								</div>
								<div class="card-assortment__text"><span>Authentic Japanese Matcha Green Tea Powder</span></div>
							</li>
							<li class="assortment__card card-assortment">
								<div class="card-assortment__overlay overlay-assortment">
									<div class="overlay-assortment__top">
										<div class="overlay-assortment__descrip"><p>Experience the delicate and fragrant flavors of our Jasmine Dragon Pearls tea, a green tea that is scented with fresh jasmine flowers for a soothing and aromatic cup of tea.</p></div>
										<div class="overlay-assortment__price">25$</div>
									</div>
									<button class="overlay-assortment__button" type="button">add to cart</button>
								</div>
								<div class="card-assortment__image">
									<img class="wb-img" src="img/wb/item4.png" alt="item4-wb">
									<img src="img/item4.png" alt="item4">
								</div>
								<div class="card-assortment__text"><span>Golden Monkey</span></div>
							</li>
							<li class="assortment__card card-assortment">
								<div class="card-assortment__overlay overlay-assortment">
									<div class="overlay-assortment__top">
										<div class="overlay-assortment__descrip"><p>Exceptional Taiwanese oolong tea with a sweet and floral taste, known for its beautiful twisted leaves and complex flavor profile.</p></div>
										<div class="overlay-assortment__price">35$</div>
									</div>
									<button class="overlay-assortment__button" type="button">add to cart</button>
								</div>
								<div class="card-assortment__image">
									<img class="wb-img" src="img/wb/item5.png" alt="item5-wb">
									<img src="img/item5.png" alt="item5">
								</div>
								<div class="card-assortment__text"><span>Formosa Fancy Bai Hao Oolong</span></div>
							</li>
							<li class="assortment__card card-assortment">
								<div class="card-assortment__overlay overlay-assortment">
									<div class="overlay-assortment__top">
										<div class="overlay-assortment__descrip"><p>Stunning blue herbal tea made from butterfly pea flowers, offering a refreshing floral taste and captivating visual appeal.</p></div>
										<div class="overlay-assortment__price">13$</div>
									</div>
									<button class="overlay-assortment__button" type="button">add to cart</button>
								</div>
								<div class="card-assortment__image">
									<img class="wb-img" src="img/wb/item6.png" alt="item6-wb">
									<img src="img/item6.png" alt="item6">
								</div>
								<div class="card-assortment__text"><span>Super Blue Lavender Butterfly Pea Flower</span></div>
							</li>
							<li class="assortment__card card-assortment">
								<div class="card-assortment__overlay overlay-assortment">
									<div class="overlay-assortment__top">
										<div class="overlay-assortment__descrip"><p>A delightful herbal blend combining the fruity flavors of elderberry with the tartness of hibiscus, resulting in a vibrant and rejuvenating infusion.</p></div>
										<div class="overlay-assortment__price">17$</div>
									</div>
									<button class="overlay-assortment__button" type="button">add to cart</button>
								</div>
								<div class="card-assortment__image">
									<img class="wb-img" src="img/wb/item7.png" alt="item7-wb">
									<img src="img/item7.png" alt="item7">
								</div>
								<div class="card-assortment__text"><span>Elderberry Hibiscus</span></div>
							</li>
							<li class="assortment__card card-assortment">
								<div class="card-assortment__overlay overlay-assortment">
									<div class="overlay-assortment__top">
										<div class="overlay-assortment__descrip"><p>Hand-rolled tea leaves infused with jasmine blossoms, creating a mesmerizing tea with a floral aroma and a subtly sweet taste.</p></div>
										<div class="overlay-assortment__price">18$</div>
									</div>
									<button class="overlay-assortment__button" type="button">add to cart</button>
								</div>
								<div class="card-assortment__image">
									<img class="wb-img" src="img/wb/item8.png" alt="item8-wb">
									<img src="img/item8.png" alt="item8">
								</div>
								<div class="card-assortment__text"><span>Imperial Dragon Phoenix Pearls Jasmine Tea</span></div>
							</li>
						</ul>
					</div>
				</div>
			</section>
		</main>
		<footer class="footer">
			<div class="footer__container _container">
				<div class="footer__body">
					<span>copyright Â©2023 all rights reserved</span>
					<span class="footer__author">designed and developed by @jetmfp</span>
				</div>
			</div>
		</footer>
	</div>
	<script>
		const cartNumber = document.querySelector('.actions-header__cart-numb');
		const currentEmail = localStorage.getItem('currentEmail');
		const productItems = document.querySelector('.assortment__cards');
		const productList = JSON.parse(localStorage.getItem(`products_${currentEmail}`)) || [];
		const userNameElement = document.querySelector('.modal-account__name');
		const signOutButton = document.querySelector('.modal-account__exit');
		const accountBlock = document.querySelector('.actions-header__account');
		const currentUser = localStorage.getItem('currentUser');

		const showQuantity = function() {
			if (productList.length > 0) {
				cartNumber.textContent = JSON.parse(localStorage.getItem(`products_${currentEmail}`)).length;
			} else {
				cartNumber.textContent = 0;
			}
		}

		window.addEventListener('load', showQuantity);

		const cards = document.querySelectorAll('.card-assortment');

		cards.forEach((card) => {
			card.addEventListener('click', () => {
				const overlayVisible = document.querySelector('.visible');

				if (overlayVisible) overlayVisible.classList.toggle('visible');
				const overlay = card.querySelector('.overlay-assortment');
				overlay.classList.toggle('visible');
			})
		})

		const buyNow = document.querySelector('.intro__button');
		const sectionAssortment = document.querySelector('.assortment');

		buyNow.addEventListener('click', function(e) {
			e.preventDefault();
			sectionAssortment.scrollIntoView({behavior: "smooth"})
		});

		let modalAccount;

		if (currentUser) {
			modalAccount = createModalAccount();
			const modalAccountName = modalAccount.querySelector('.modal-account__name');
			const exitLink = modalAccount.querySelector('.modal-account__exit');

			modalAccountName.textContent = currentUser;

			exitLink.addEventListener('click', function(e) {
				e.preventDefault();
				localStorage.removeItem('currentUser');
				window.location.href = 'welcome.html';
			})
		} else {
			accountBlock.addEventListener('click', function() {
				window.location.href = 'welcome.html';
			})
		}

		accountBlock.addEventListener('click', function(e) {
			if (modalAccount) {
				e.stopPropagation(); // Prevent closing the modal when clicking on accountBlock itself
				accountBlock.appendChild(modalAccount);
				setTimeout(function() {
					modalAccount.classList.add('fade-in');
				}, 10)
			}
		})

		document.addEventListener('click', function(e) {
			const target = e.target;
			const modal = document.querySelector('.modal-account');

			if (modal && target !== modal && !modal.contains(target) && target !== accountBlock) {
				modal.classList.remove('fade-in');
				setTimeout(function() {
					accountBlock.removeChild(modal);
				}, 300);
			}
		})

		function createModalAccount() {
			const modalAccount = document.createElement('div');
			modalAccount.classList.add('actions-header__account-modal', 'modal-account');
			const modalAccountName = document.createElement('div');
			modalAccountName.classList.add('modal-account__name');
			const exitLink = document.createElement('a');
			exitLink.classList.add('modal-account__exit');
			exitLink.href = '#';
			exitLink.textContent = 'Exit';

			modalAccount.appendChild(modalAccountName);
			modalAccount.appendChild(exitLink);

			return modalAccount;
		}

		productItems.addEventListener('click', function(e) {
			const clicked = e.target.closest('.overlay-assortment__button');
			if (!clicked) return;

			const productImage = clicked.parentElement.parentElement.children[1].children[1].src;
			const productName = clicked.parentElement.parentElement.children[2].children[0].innerText;
			const productPrice = clicked.parentElement.parentElement.children[0].children[0].children[1].innerText;
			const product = {
				img: productImage,
				name: productName,
				price: productPrice,
				quantity: 1
			};

			const index = productList.findIndex(item => item.name === product.name);
			if (index !== -1) {
				productList[index].quantity++;
			} else {
				productList.push(product);
			}

			localStorage.setItem(`products_${currentEmail}`, JSON.stringify(productList));
			showQuantity();
		});
	</script>


	<script src="js/script.js"></script>
</body>
</html>
